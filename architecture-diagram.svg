<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="750" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Gradients -->
    <linearGradient id="blueGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4285F4;stop-opacity:0.08" />
      <stop offset="100%" style="stop-color:#4285F4;stop-opacity:0.02" />
    </linearGradient>
    <linearGradient id="greenGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#34A853;stop-opacity:0.08" />
      <stop offset="100%" style="stop-color:#34A853;stop-opacity:0.02" />
    </linearGradient>
    <linearGradient id="orangeGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FBBC04;stop-opacity:0.08" />
      <stop offset="100%" style="stop-color:#FBBC04;stop-opacity:0.02" />
    </linearGradient>
    
    <!-- Shadow filter -->
    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="2"/>
      <feOffset dx="0" dy="1" result="offsetblur"/>
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.15"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <!-- Arrow markers -->
    <marker id="arrowBlue" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
      <path d="M0,0 L0,6 L7,3 z" fill="#4285F4" />
    </marker>
    <marker id="arrowGreen" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
      <path d="M0,0 L0,6 L7,3 z" fill="#34A853" />
    </marker>
    <marker id="arrowOrange" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
      <path d="M0,0 L0,6 L7,3 z" fill="#FBBC04" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="750" fill="#FAFBFC"/>
  
  <!-- Title -->
  <text x="600" y="32" font-family="Google Sans, Arial, sans-serif" font-size="24" font-weight="600" fill="#202124" text-anchor="middle">Revela Architecture</text>
  <text x="600" y="52" font-family="Arial, sans-serif" font-size="13" fill="#5F6368" text-anchor="middle">AI-Powered Data Analysis for the Web</text>
  
  <!-- User Browser -->
  <g id="browser">
    <circle cx="195" cy="115" r="30" fill="#E8F0FE" stroke="#4285F4" stroke-width="2"/>
    <path d="M 195 95 L 195 135 M 175 115 L 215 115" stroke="#4285F4" stroke-width="2" fill="none"/>
    <circle cx="195" cy="115" r="18" stroke="#4285F4" stroke-width="2" fill="none"/>
    <circle cx="195" cy="115" r="4" fill="#4285F4"/>
    <text x="195" y="158" font-family="Google Sans, Arial, sans-serif" font-size="13" font-weight="600" fill="#202124" text-anchor="middle">User Browser</text>
  </g>
  
  <!-- Arrow down to extension -->
  <path d="M 195 160 L 195 195" stroke="#4285F4" stroke-width="2.5" fill="none" marker-end="url(#arrowBlue)"/>
  
  <!-- Chrome Extension -->
  <g id="extension" filter="url(#shadow)">
    <rect x="40" y="200" width="310" height="195" rx="8" fill="url(#blueGradient)" stroke="#4285F4" stroke-width="2.5"/>
    
    <g transform="translate(55, 215)">
      <circle cx="10" cy="10" r="10" fill="#4285F4"/>
      <path d="M 6 10 L 9 13 L 15 6" stroke="white" stroke-width="2" fill="none" stroke-linecap="round"/>
      <text x="26" y="16" font-family="Google Sans, Arial, sans-serif" font-size="15" font-weight="600" fill="#1A73E8">Chrome Extension</text>
    </g>
    
    <g transform="translate(52, 242)">
      <!-- Content Script -->
      <rect x="0" y="0" width="130" height="50" rx="4" fill="white" stroke="#4285F4" stroke-width="1.5"/>
      <text x="65" y="18" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#1A73E8" text-anchor="middle">Content Script</text>
      <text x="65" y="32" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• Detect tables/charts</text>
      <text x="65" y="43" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• Hover UI</text>
      
      <!-- Background Worker -->
      <rect x="145" y="0" width="130" height="50" rx="4" fill="white" stroke="#4285F4" stroke-width="1.5"/>
      <text x="210" y="18" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#1A73E8" text-anchor="middle">Background Worker</text>
      <text x="210" y="32" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• Session mgmt</text>
      <text x="210" y="43" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• API routing</text>
      
      <!-- Popup UI -->
      <rect x="37" y="65" width="220" height="50" rx="4" fill="white" stroke="#4285F4" stroke-width="1.5"/>
      <text x="147" y="83" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#1A73E8" text-anchor="middle">Popup UI</text>
      <text x="147" y="97" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• Chat interface • Settings</text>
      <text x="147" y="108" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• Analysis display</text>
    </g>
  </g>
  
  <!-- Arrow to Backend -->
  <path d="M 350 297 L 400 297" stroke="#4285F4" stroke-width="2.5" fill="none" marker-end="url(#arrowGreen)"/>
  <text x="375" y="290" font-family="Arial, sans-serif" font-size="10" fill="#5F6368" text-anchor="middle" font-style="italic">HTTPS</text>
  
  <!-- Backend API (Cloud Run) -->
  <g id="backend" filter="url(#shadow)">
    <rect x="405" y="150" width="355" height="295" rx="8" fill="url(#greenGradient)" stroke="#34A853" stroke-width="2.5"/>
    
    <g transform="translate(420, 165)">
      <rect x="0" y="0" width="32" height="32" rx="6" fill="#34A853"/>
      <path d="M 8 16 L 16 8 L 24 16 L 16 24 Z" fill="white"/>
      <text x="40" y="22" font-family="Google Sans, Arial, sans-serif" font-size="15" font-weight="600" fill="#188038">Cloud Run - Backend API</text>
    </g>
    <text x="420" y="206" font-family="Arial, sans-serif" font-size="11" fill="#137333">revela-app (CPU Only)</text>
    
    <g transform="translate(417, 220)">
      <!-- Flask -->
      <rect x="0" y="0" width="155" height="65" rx="4" fill="white" stroke="#34A853" stroke-width="1.5"/>
      <text x="77.5" y="18" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#188038" text-anchor="middle">Flask API Server</text>
      <text x="77.5" y="32" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• REST endpoints</text>
      <text x="77.5" y="43" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• CORS handling</text>
      <text x="77.5" y="54" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• Request routing</text>
      
      <!-- Session Manager -->
      <rect x="170" y="0" width="155" height="65" rx="4" fill="white" stroke="#34A853" stroke-width="1.5"/>
      <text x="247.5" y="18" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#188038" text-anchor="middle">Session Manager</text>
      <text x="247.5" y="32" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• Ephemeral sessions</text>
      <text x="247.5" y="43" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• 30min timeout</text>
      <text x="247.5" y="54" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• Auto cleanup</text>
      
      <!-- Data Processing -->
      <rect x="0" y="80" width="155" height="65" rx="4" fill="white" stroke="#34A853" stroke-width="1.5"/>
      <text x="77.5" y="98" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#188038" text-anchor="middle">Data Processing</text>
      <text x="77.5" y="112" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• Polars DataFrames</text>
      <text x="77.5" y="123" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• HTML parsing</text>
      <text x="77.5" y="134" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• Query execution</text>
      
      <!-- Code Executor -->
      <rect x="170" y="80" width="155" height="65" rx="4" fill="white" stroke="#34A853" stroke-width="1.5"/>
      <text x="247.5" y="98" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#188038" text-anchor="middle">Code Executor</text>
      <text x="247.5" y="112" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• Matplotlib charts</text>
      <text x="247.5" y="123" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• Python sandbox</text>
      <text x="247.5" y="134" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• Safe execution</text>
    </g>
    
    <text x="582.5" y="435" font-family="Arial, sans-serif" font-size="10" fill="#137333" text-anchor="middle">2 vCPU • 2 GiB RAM • 0-10 instances</text>
  </g>
  
  <!-- Arrow to Ollama -->
  <path d="M 582.5 445 L 582.5 475" stroke="#34A853" stroke-width="2.5" fill="none" marker-end="url(#arrowOrange)" stroke-dasharray="6,3"/>
  <text x="615" y="462" font-family="Arial, sans-serif" font-size="10" fill="#5F6368" font-style="italic">Internal API</text>
  
  <!-- Ollama LLM (Cloud Run) -->
  <g id="ollama" filter="url(#shadow)">
    <rect x="405" y="480" width="355" height="230" rx="8" fill="url(#orangeGradient)" stroke="#FBBC04" stroke-width="2.5"/>
    
    <g transform="translate(420, 495)">
      <rect x="0" y="0" width="32" height="32" rx="6" fill="#FBBC04"/>
      <path d="M 8 16 L 16 8 L 24 16 L 16 24 Z" fill="white"/>
      <text x="40" y="22" font-family="Google Sans, Arial, sans-serif" font-size="15" font-weight="600" fill="#E37400">Cloud Run - Ollama LLM</text>
    </g>
    
    <!-- GPU Badge -->
    <g transform="translate(698, 490)">
      <rect x="0" y="0" width="48" height="32" rx="4" fill="#EA4335" opacity="0.1" stroke="#EA4335" stroke-width="2"/>
      <rect x="6" y="6" width="10" height="20" rx="1" fill="#EA4335"/>
      <rect x="20" y="6" width="10" height="20" rx="1" fill="#EA4335"/>
      <rect x="32" y="6" width="10" height="20" rx="1" fill="#EA4335"/>
      <text x="24" y="44" font-family="Arial, sans-serif" font-size="8" fill="#EA4335" text-anchor="middle" font-weight="600">NVIDIA L4</text>
    </g>
    
    <text x="420" y="536" font-family="Arial, sans-serif" font-size="11" fill="#E37400">ollama-gemma (GPU Enabled)</text>
    
    <g transform="translate(417, 550)">
      <!-- Ollama Server -->
      <rect x="0" y="0" width="155" height="60" rx="4" fill="white" stroke="#FBBC04" stroke-width="1.5"/>
      <text x="77.5" y="18" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#E37400" text-anchor="middle">Ollama Server</text>
      <text x="77.5" y="32" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• Model serving</text>
      <text x="77.5" y="43" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• GPU acceleration</text>
      <text x="77.5" y="54" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">• REST API</text>
      
      <!-- Gemma Model -->
      <rect x="170" y="0" width="155" height="60" rx="4" fill="white" stroke="#FBBC04" stroke-width="1.5"/>
      <circle cx="247.5" cy="22" r="10" fill="#FBBC04" opacity="0.2"/>
      <path d="M 242 20 Q 247.5 16, 253 20 Q 247.5 24, 242 20" fill="#E37400"/>
      <circle cx="245" cy="19" r="1.5" fill="white"/>
      <circle cx="250" cy="19" r="1.5" fill="white"/>
      <text x="247.5" y="42" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#E37400" text-anchor="middle">Gemma 3 (12B)</text>
      <text x="247.5" y="54" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">Vision &amp; data insights</text>
      
      <!-- Processing -->
      <rect x="37" y="75" width="250" height="45" rx="4" fill="white" stroke="#FBBC04" stroke-width="1.5"/>
      <text x="162.5" y="93" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#E37400" text-anchor="middle">Vision &amp; Language Processing</text>
      <text x="162.5" y="107" font-family="Arial, sans-serif" font-size="9" fill="#5F6368" text-anchor="middle">Chart understanding • Natural language Q&amp;A</text>
    </g>
    
    <text x="582.5" y="700" font-family="Arial, sans-serif" font-size="10" fill="#E37400" text-anchor="middle">4 vCPU • 8 GiB RAM • NVIDIA L4 GPU • 0-5 instances</text>
  </g>
  
  <!-- Right Side Panel -->
  <g id="right-panel">
    <!-- Key Features -->
    <g id="features" filter="url(#shadow)">
      <rect x="810" y="90" width="350" height="280" rx="8" fill="white" stroke="#DADCE0" stroke-width="2"/>
      <text x="985" y="118" font-family="Google Sans, Arial, sans-serif" font-size="16" font-weight="600" fill="#202124" text-anchor="middle">Key Features</text>
      
      <g transform="translate(825, 135)">
        <circle cx="6" cy="6" r="4" fill="#4285F4"/>
        <text x="18" y="10" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#202124">Ephemeral Sessions</text>
        <text x="18" y="23" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">30-min timeout, no data persistence</text>
        
        <circle cx="6" cy="46" r="4" fill="#34A853"/>
        <text x="18" y="50" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#202124">Auto-scaling</text>
        <text x="18" y="63" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">Scale to zero when idle</text>
        
        <circle cx="6" cy="86" r="4" fill="#FBBC04"/>
        <text x="18" y="90" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#202124">GPU Acceleration</text>
        <text x="18" y="103" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">NVIDIA L4 for fast LLM inference</text>
        
        <circle cx="6" cy="126" r="4" fill="#EA4335"/>
        <text x="18" y="130" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#202124">Serverless</text>
        <text x="18" y="143" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">No infrastructure mgmt, pay per use</text>
        
        <circle cx="6" cy="166" r="4" fill="#9334E9"/>
        <text x="18" y="170" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#202124">Multi-modal Analysis</text>
        <text x="18" y="183" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">Tables, charts, images</text>
        
        <circle cx="6" cy="206" r="4" fill="#0D652D"/>
        <text x="18" y="210" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#202124">Privacy First</text>
        <text x="18" y="223" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">No persistent storage of user data</text>
      </g>
    </g>
    
    <!-- Tech Stack -->
    <g id="tech-stack" filter="url(#shadow)">
      <rect x="810" y="395" width="350" height="315" rx="8" fill="white" stroke="#DADCE0" stroke-width="2"/>
      <text x="985" y="423" font-family="Google Sans, Arial, sans-serif" font-size="16" font-weight="600" fill="#202124" text-anchor="middle">Technology Stack</text>
      
      <g transform="translate(825, 440)">
        <text x="0" y="12" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#1A73E8">Frontend</text>
        <text x="0" y="25" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">• JavaScript (ES6+)</text>
        <text x="0" y="36" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">• Chrome Extension API</text>
        <text x="0" y="47" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">• HTML5/CSS3</text>
        
        <text x="0" y="72" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#188038">Backend</text>
        <text x="0" y="85" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">• Python 3.11+</text>
        <text x="0" y="96" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">• Flask (API Framework)</text>
        <text x="0" y="107" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">• Polars (Data Processing)</text>
        <text x="0" y="118" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">• Matplotlib (Visualization)</text>
        
        <text x="0" y="143" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#E37400">AI/ML</text>
        <text x="0" y="156" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">• Gemma 3 (12B params)</text>
        <text x="0" y="167" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">• Ollama (Inference Server)</text>
        <text x="0" y="178" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">• Vision-Language Model</text>
        
        <text x="0" y="203" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#EA4335">Cloud Platform</text>
        <text x="0" y="216" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">• Google Cloud Run</text>
        <text x="0" y="227" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">• Container Registry</text>
        <text x="0" y="238" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">• Serverless Architecture</text>
        
        <text x="0" y="263" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#5F6368">Data Processing</text>
        <text x="0" y="276" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">• Polars DataFrames</text>
        <text x="0" y="287" font-family="Arial, sans-serif" font-size="9" fill="#5F6368">• NumPy/Pandas compatible</text>
      </g>
    </g>
  </g>
  
  <!-- Footer -->
  <text x="600" y="738" font-family="Arial, sans-serif" font-size="10" fill="#80868B" text-anchor="middle" font-style="italic">
    Data Flow: Browser → Extension → Backend API (CPU) → Ollama LLM (GPU) → Analysis Results
  </text>
</svg>
